{% load euler_tags %}

<html>
	<head>
		<title> 
            {% block page_title %} 
                Euler's Cookbook
            {% endblock %}
        </title>

        {% block meta %}
			<meta name="viewport" content="width=device-width, initial-scale=1">
        {% endblock %}
        
		{% block head_css %}
			<link rel="stylesheet" href="{{ STATIC_URL }}css/base.css"/>
			<link rel="stylesheet" href="{{ STATIC_URL }}css/responsive.css"/>
			<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		{% endblock %}
	</head>

	<body>
		{% block header %}
			<div id="site-header">
				<div id="site-header-logo">
					<a href='{% url "site_home" %}'><img id="site-header-img" src="http://i.imgur.com/bV1fJ34.png" /></a>
				</div>
				<div id="site-header-menu">
				    
				    <ul id="mobile-nav-icons">
				        <li id="top-nav-menu"><a href="javascript:;"><i class="fa fa-bars"></i></a></li>
				        <li id="top-nav-search"><a href="javascript:;"><i class="fa fa-search"></i></a></li>
				    </ul>

					<ul class="nav-menu">
	                    <li><a href='{% url "about" %}'>About</a></li>
	                    <li><a href="https://github.com/zachcalvert/eulers_cookbook" target="blank">View on GitHub</a></li>
	                </ul>
				</div>
			</div>
			{% if messages %}
				<ul class="messages">
				    {% for message in messages %}
				    	<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
				    {% endfor %}
				</ul>
			{% endif %}
		{% endblock %}

		{% block description %}{% endblock %}

		{% block content %}
		<div id="content">
			<ul class="pagination nav navbar-nav">
				{% if is_paginated %}
			        <div class="pagination">
			            <span class="page-links">
			            	{% if page_obj.number != 1 %}
								<a href="?page={{ page_obj.1 }}">&lt;&lt;</a>
							{% else %}
								<p>&lt;&lt;</p>
							{% endif %}
			                {% if page_obj.has_previous %}
			                    <a href="?page={{ page_obj.previous_page_number }}">&lt;</a>
		                    {% else %}
		                    	<p>&lt;</p>
			                {% endif %}
			                <span class="page-current">
			                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
			                </span>
			                {% if page_obj.has_next %}
			                    <a href="?page={{ page_obj.next_page_number }}">&gt;</a>
		                    {% else %}
		                    	<p>&gt;</p>
			                {% endif %}
			                
			                {% if page_obj.number != page_obj.paginator.num_pages %}
			                	<a href="?page={{ page_obj.paginator.num_pages }}">&gt;&gt;</a>
		                	{% else %}
			                	<p>&gt;&gt;</p>
		                	{% endif %}
			            </span>
			        </div>
			    {% endif %}
			</ul>

			 <div class="problems-display-settings">
                <form id="problems-non-ajax-form">
                    <label for="problems-display-mode">Show:</label>
                    <select name="display" id="problems-sort-mode" onchange="this.form.submit()">
                        <option name="all" value="all" {% if display == 'all' %} selected {% endif %}>All</option>
                        <option name="solved" value="solved" {% if display == 'solved' %} selected {% endif %}>Solved</option>
                        <option name="unsolved" value="unsolved" {% if display == 'unsolved' %} selected {% endif %}>Unsolved</option>
                    </select>
                    <br/>
                </form>
            </div>

			<table class="table-of-contents">
				<tr>
					<td class="table-header">#</td>
					<td class="table-header">Title</td>
					<td class="table-header solved">Solved</td>
				</tr>
				{% for problem in problem_list %}
					<tr>
						<td class="table-element">{{ problem.number }}</td>
						<td class="table-element"><a href='{% url "euler_problem" problem.number %}'>{{ problem.title}}</a></td>
						<td class="solved">
							{% if problem.solved %}
								&#x2713;
							{% endif %}
						</td>
					</tr>
				{% endfor %}
			</table>
			
			<ul class="pagination nav navbar-nav">
				{% if is_paginated %}
			        <div class="pagination">
			            <span class="page-links">
			            	{% if page_obj.number != 1 %}
								<a href="?page={{ page_obj.1 }}">&lt;&lt;</a>
							{% else %}
								<p>&lt;&lt;</p>
							{% endif %}
			                {% if page_obj.has_previous %}
			                    <a href="?page={{ page_obj.previous_page_number }}">&lt;</a>
		                    {% else %}
		                    	<p>&lt;</p>
			                {% endif %}
			                <span class="page-current">
			                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
			                </span>
			                {% if page_obj.has_next %}
			                    <a href="?page={{ page_obj.next_page_number }}">&gt;</a>
		                    {% else %}
		                    	<p>&gt;</p>
			                {% endif %}
			                
			                {% if page_obj.number != page_obj.paginator.num_pages %}
			                	<a href="?page={{ page_obj.paginator.num_pages }}">&gt;&gt;</a>
		                	{% else %}
			                	<p>&gt;&gt;</p>
		                	{% endif %}
			            </span>
			        </div>
			    {% endif %}
			</ul>
		</div>
		{% endblock %}

		{% block solution %}{% endblock %}

		{% block footer %}
			<div id="footer-link">
				<a href="https://github.com/zachcalvert/euler_cookbook">View on GitHub</a><br>
			</div>
		{% endblock %}

        {% block js %}
			<script src="{{ STATIC_URL }}js/jquery-2.1.4.min.js"></script>
		{% endblock %}

		{% block interactive %}{% endblock %}

		{% block extra_body_content %}
			<script>
			    $(document).ready(function () {
		            $('#top-nav-menu a').click(function(){
		                if ($("ul.nav-menu").is(":visible")) {
		                    $("ul.nav-menu").slideUp(300);
		                    $('#site-header-menu a').css("color","#444444");
		                } else {
		                    $("ul.nav-menu").slideDown(300);
		                    $('#site-header-menu a').css("color","#000026");
		                }
		            });

                    $('#top-nav-search').click(function () {
		                // get template
		                var search_template = $('#search-overlay-template').html();
		                // load it in
		                $('#footer-link').after(search_template);
		            });

                    $('body').on('click', '.search-close', function () {
		                $('#search-overlay').remove();
		            });
			    });

	            $(document).mouseup(function (e) {
	                var container = $("ul.nav-menu");
	                if (!container.is(e.target) // if the target of the click isn't the container...
	                    && container.has(e.target).length === 0 // ... nor a descendant of the container
	                    && $(window).width() < 1023) // and the window is appropriately sized
	                {
	                    container.slideUp(200);
	                }
	            });
			</script>

		    <script type="text/html" id="search-overlay-template">
		        <div id="search-overlay">
		            <div class="search-form-wrapper">
		                <form class="search-form" action="{% url 'site_home' %}" role="search" method="GET">
		                    <input type="text" name="q" class="search-text" autocomplete="off" placeholder="Search Terms..">
		                    <button type="submit">Go</button>
		                </form>
		            </div>
		            <a href="javascript:;" class="search-close"><i class="fa fa-times-circle-o"></i></a>
		        </div>
		    </script>
		{% endblock %}
	</body>
</html>